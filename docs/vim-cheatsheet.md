# Vim 操作チートシート

## モードの概念

Vimには3つの主要なモードがあります：

| モード | 説明 | 切り替え方法 |
|--------|------|--------------|
| **ノーマルモード** | カーソル移動、コピペ、削除など | `Esc`キーで戻る |
| **インサートモード** | テキスト入力 | `i`, `a`, `o`などで入入 |
| **コマンドモード** | ファイル保存、終了、検索など | `:`で入る |

---

## モード切り替え

### ノーマルモード → インサートモード

| キー | 動作 |
|------|------|
| `i` | カーソル位置から入力開始 |
| `a` | カーソルの次の文字から入力開始 |
| `I` | 行頭から入力開始 |
| `A` | 行末から入力開始 |
| `o` | 下に新しい行を作って入力開始 |
| `O` | 上に新しい行を作って入力開始 |

### インサートモード → ノーマルモード

| キー | 動作 |
|------|------|
| `Esc` | ノーマルモードに戻る |
| `Ctrl + [` | ノーマルモードに戻る（代替） |

### ノーマルモード → コマンドモード

| キー | 動作 |
|------|------|
| `:` | コマンド入力開始 |
| `/` | 前方検索開始 |
| `?` | 後方検索開始 |

---

## ファイル操作（コマンドモード）

### 保存・終了

| コマンド | 動作 |
|----------|------|
| `:w` | 保存 |
| `:w ファイル名` | 名前を付けて保存 |
| `:q` | 終了（変更がない場合） |
| `:q!` | **保存せずに強制終了** |
| `:wq` | 保存して終了 |
| `:x` | 保存して終了（変更がある場合のみ保存） |
| `ZZ` | 保存して終了（ノーマルモードから） |
| `ZQ` | 保存せずに終了（ノーマルモードから） |

### ファイルを開く

| コマンド | 動作 |
|----------|------|
| `:e ファイルパス` | ファイルを開く |
| `:e!` | 現在のファイルを再読み込み（変更を破棄） |

---

## カーソル移動（ノーマルモード）

### 基本移動

| キー | 動作 |
|------|------|
| `h` | 左へ |
| `j` | 下へ |
| `k` | 上へ |
| `l` | 右へ |

### 単語単位の移動

| キー | 動作 |
|------|------|
| `w` | 次の単語の先頭へ |
| `b` | 前の単語の先頭へ |
| `e` | 次の単語の末尾へ |

### 行内移動

| キー | 動作 |
|------|------|
| `0` | 行頭へ |
| `^` | 行頭（空白を除く）へ |
| `$` | 行末へ |

### ファイル内移動

| キー | 動作 |
|------|------|
| `gg` | ファイルの先頭へ |
| `G` | ファイルの末尾へ |
| `10G` | 10行目へ |
| `Ctrl + f` | 1画面下へ |
| `Ctrl + b` | 1画面上へ |
| `Ctrl + d` | 半画面下へ |
| `Ctrl + u` | 半画面上へ |

### 数字との組み合わせ

| キー | 動作 |
|------|------|
| `10j` | 10行下へ |
| `5w` | 5単語先へ |
| `3k` | 3行上へ |

---

## 編集操作（ノーマルモード）

### 削除

| キー | 動作 |
|------|------|
| `x` | カーソル位置の1文字削除 |
| `X` | カーソルの前の1文字削除 |
| `dd` | 1行削除 |
| `dw` | 単語削除 |
| `d$` | カーソル位置から行末まで削除 |
| `d0` | カーソル位置から行頭まで削除 |
| `5dd` | 5行削除 |

### コピー（ヤンク）

| キー | 動作 |
|------|------|
| `yy` | 1行コピー |
| `yw` | 単語コピー |
| `y$` | カーソル位置から行末までコピー |
| `5yy` | 5行コピー |

### 貼り付け（ペースト）

| キー | 動作 |
|------|------|
| `p` | カーソルの後に貼り付け |
| `P` | カーソルの前に貼り付け |

### 変更

| キー | 動作 |
|------|------|
| `cw` | 単語を変更（削除してインサートモードへ） |
| `cc` | 行を変更 |
| `C` | カーソル位置から行末まで変更 |

### アンドゥ・リドゥ

| キー | 動作 |
|------|------|
| `u` | 元に戻す（アンドゥ） |
| `Ctrl + r` | やり直し（リドゥ） |
| `.` | 直前の操作を繰り返す |

---

## 検索・置換

### 検索（ノーマルモード）

| キー | 動作 |
|------|------|
| `/検索文字` | 前方検索 |
| `?検索文字` | 後方検索 |
| `n` | 次の検索結果へ |
| `N` | 前の検索結果へ |
| `*` | カーソル位置の単語を前方検索 |
| `#` | カーソル位置の単語を後方検索 |

### 置換（コマンドモード）

| コマンド | 動作 |
|----------|------|
| `:s/old/new/` | 現在行の最初のoldをnewに置換 |
| `:s/old/new/g` | 現在行のすべてのoldをnewに置換 |
| `:%s/old/new/g` | ファイル全体のoldをnewに置換 |
| `:%s/old/new/gc` | ファイル全体を確認しながら置換 |

---

## ビジュアルモード（範囲選択）

### ビジュアルモードに入る

| キー | 動作 |
|------|------|
| `v` | 文字単位の選択 |
| `V` | 行単位の選択 |
| `Ctrl + v` | 矩形選択（ブロック選択） |

### 選択後の操作

| キー | 動作 |
|------|------|
| `d` | 削除 |
| `y` | コピー |
| `c` | 変更 |
| `>` | インデント |
| `<` | アンインデント |

---

## 折りたたみ操作

| キー | 動作 |
|------|------|
| `zR` | すべて展開 |
| `zM` | すべて折りたたみ |
| `za` | カーソル位置の折りたたみをトグル |
| `zo` | カーソル位置を展開 |
| `zc` | カーソル位置を折りたたみ |

---

## インストール済みプラグインの使い方

### NERDTree（ファイルエクスプローラ）

| コマンド | 動作 |
|----------|------|
| `:NERDTree` | エクスプローラを開く |
| `:NERDTreeToggle` | エクスプローラをトグル |

**NERDTree内の操作**:
- `Enter` - ファイルを開く
- `o` - ファイルを開く
- `t` - 新しいタブで開く
- `s` - 縦分割で開く
- `i` - 横分割で開く
- `q` - NERDTreeを閉じる

### fzf（ファジーファインダー）

| コマンド | 動作 |
|----------|------|
| `:Files` | ファイル名で検索 |
| `:Buffers` | 開いているバッファを検索 |
| `:Rg 検索文字` | ファイル内容を検索（RipGrep） |

### EasyMotion（瞬間移動）

リーダーキー（`Space`）を使った操作:
- `<Space><Space>w` - 単語の先頭にジャンプ
- `<Space><Space>f{文字}` - 指定文字にジャンプ

---

## よく使うコマンド集

### 複数ファイル操作

| コマンド | 動作 |
|----------|------|
| `:split ファイル名` | 横分割でファイルを開く |
| `:vsplit ファイル名` | 縦分割でファイルを開く |
| `Ctrl + w, w` | ウィンドウ間を移動 |
| `Ctrl + w, h/j/k/l` | 指定方向のウィンドウへ移動 |
| `Ctrl + w, q` | ウィンドウを閉じる |

### タブ操作

| コマンド | 動作 |
|----------|------|
| `:tabnew` | 新しいタブを開く |
| `:tabnext` または `gt` | 次のタブへ |
| `:tabprev` または `gT` | 前のタブへ |
| `:tabclose` | タブを閉じる |

---

## 緊急時の対処法

### 困ったときは

1. **何かおかしくなったら**: `Esc`を何度か押す → ノーマルモードに戻る
2. **保存せずに終了したい**: `:q!` + `Enter`
3. **変更を破棄して再読み込み**: `:e!` + `Enter`
4. **強制終了**: `Ctrl + z`（バックグラウンドに送る）→ `fg`で戻る

---

## 練習のステップ

### レベル1: 基本操作
1. `hjkl` でカーソル移動
2. `i` で入力、`Esc` で戻る
3. `:wq` で保存終了、`:q!` で保存せず終了

### レベル2: 効率的な移動
1. `w`, `b` で単語移動
2. `0`, `$` で行頭・行末移動
3. `gg`, `G` でファイル先頭・末尾移動

### レベル3: 編集操作
1. `dd`, `yy`, `p` でコピペ
2. `u`, `Ctrl + r` でアンドゥ・リドゥ
3. `cw` で単語変更

### レベル4: 高度な操作
1. ビジュアルモードで範囲選択
2. `/` で検索、`n` で次へ
3. `:%s/old/new/g` で置換

---

## 設定ファイル

- **設定ファイルの場所**: `~/.vimrc`
- **プラグインの場所**: `~/.vim/pack/plugins/start/`
- **カラースキームの場所**: `~/.vim/colors/`

### カラースキームの変更

```vim
:colorscheme onedark
:colorscheme molokai
```

---

## 参考リンク

- [Vim入門 - Qiita](https://qiita.com/kyawphyonaing/items/b31378ccde7957bc541d)
- [Vimで高速で移動 - Qiita](https://qiita.com/takeharu/items/9d1c3577f8868f7b07b5)
- [オペレータについて](https://www.infiniteloop.co.jp/tech-blog/2011/11/vim-operator/)
- [テキストオブジェクトについて](https://qiita.com/kasei-san/items/0b2da68269397906c14c)

---

## まとめ

**最重要コマンド**:
- `Esc` - ノーマルモードに戻る
- `:w` - 保存
- `:q` - 終了
- `:q!` - 保存せずに終了
- `:wq` - 保存して終了

**覚えておくと便利**:
- `hjkl` - カーソル移動
- `i` - 入力開始
- `dd` - 行削除
- `yy` - 行コピー
- `p` - 貼り付け
- `u` - 元に戻す
- `/検索` - 検索

Vimは最初は難しく感じますが、慣れると非常に高速に編集できるようになります。
毎日少しずつ使って、手に覚えさせることが上達の近道です！
